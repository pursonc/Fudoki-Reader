<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Fudoki Reader</title>
  
  <!-- ä¸»é¢˜é¢œè‰² -->
  <meta name="theme-color" content="#4a90e2">
  <meta name="msapplication-TileColor" content="#4a90e2">
  
  <link rel="stylesheet" href="static/styles.css">
  <!-- ç§»åŠ¨ç«¯æ ·å¼ï¼šä»…åœ¨ç§»åŠ¨è®¾å¤‡åŠ è½½ï¼Œä¼˜å…ˆçº§é«˜äºä¸»æ ·å¼ -->
  <link rel="stylesheet" href="static/mobile.css" media="(max-width: 768px)">
  <link rel="icon" type="image/png" href="static/logo.png">
  
  <!-- æ¸…é™¤ç¼“å­˜è„šæœ¬ - å¿…é¡»åœ¨å…¶ä»–è„šæœ¬ä¹‹å‰æ‰§è¡Œ -->
  <script>
    (function() {
      // æ£€æŸ¥ URL å‚æ•°
      const urlParams = new URLSearchParams(window.location.search);
      const shouldClear = urlParams.get('clear');
      
      if (shouldClear === '1' || shouldClear === 'true') {
        console.log('ğŸ§¹ æ¸…é™¤ç¼“å­˜æ¨¡å¼å·²å¯åŠ¨...');
        
        // ä¿å­˜æ–‡æ¡£æ•°æ®
        const documentsData = localStorage.getItem('texts');
        const activeId = localStorage.getItem('activeId');
        
        // æ¸…é™¤æ‰€æœ‰ localStorageï¼ˆé™¤äº†æ–‡æ¡£ï¼‰
        const keysToPreserve = ['texts', 'activeId'];
        const allKeys = Object.keys(localStorage);
        let clearedCount = 0;
        
        allKeys.forEach(key => {
          if (!keysToPreserve.includes(key)) {
            localStorage.removeItem(key);
            clearedCount++;
          }
        });
        
        console.log(`âœ… å·²æ¸…é™¤ ${clearedCount} ä¸ª localStorage é¡¹`);
        
        // æ¸…é™¤æ‰€æœ‰ sessionStorage
        const sessionCount = sessionStorage.length;
        sessionStorage.clear();
        console.log(`âœ… å·²æ¸…é™¤ ${sessionCount} ä¸ª sessionStorage é¡¹`);
        
        // æ¸…é™¤ PWA Service Worker ç¼“å­˜
        if ('caches' in window) {
          caches.keys().then(function(cacheNames) {
            return Promise.all(
              cacheNames.map(function(cacheName) {
                console.log(`ğŸ—‘ï¸  åˆ é™¤ç¼“å­˜: ${cacheName}`);
                return caches.delete(cacheName);
              })
            );
          }).then(function() {
            console.log('âœ… å·²æ¸…é™¤æ‰€æœ‰ PWA ç¼“å­˜');
            
            // æ³¨é”€ Service Worker
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                  registration.unregister();
                  console.log('âœ… å·²æ³¨é”€ Service Worker');
                }
              });
            }
            
            // æ˜¾ç¤ºå®Œæˆæ¶ˆæ¯å¹¶é‡å®šå‘
            showClearMessage();
          }).catch(function(error) {
            console.error('âŒ æ¸…é™¤ç¼“å­˜æ—¶å‡ºé”™:', error);
            showClearMessage();
          });
        } else {
          showClearMessage();
        }
        
        function showClearMessage() {
          // åˆ›å»ºæç¤ºæ¡†
          const message = document.createElement('div');
          message.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 40px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 999999;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            text-align: center;
            font-size: 16px;
            font-weight: 500;
            line-height: 1.6;
          `;
          message.innerHTML = `
            <div style="font-size: 48px; margin-bottom: 15px;">ğŸ§¹</div>
            <div style="font-size: 20px; font-weight: 600; margin-bottom: 10px;">ç¼“å­˜æ¸…é™¤å®Œæˆï¼</div>
            <div style="font-size: 14px; opacity: 0.9;">æ­£åœ¨é€€å‡ºç™»å½•...</div>
          `;
          document.body.appendChild(message);
          
          // 1.5ç§’åé€€å‡ºç™»å½•å¹¶è·³è½¬åˆ°ç™»å½•é¡µ
          setTimeout(function() {
            // è®¾ç½®ç™»å‡ºæ ‡å¿—
            sessionStorage.setItem('fudoki_logging_out', 'true');
            
            // æ¸…é™¤ç”¨æˆ·æ•°æ®ï¼ˆå¦‚æœè¿˜æœ‰æ®‹ç•™ï¼‰
            localStorage.removeItem('fudoki_user');
            
            // å¦‚æœ Firebase Auth å¯ç”¨ï¼Œå°è¯•ç™»å‡º
            if (window.firebaseAuth) {
               console.log('Firebase Auth logic removed for extension compliance.');
               window.location.href = 'login.html';
            } else {
              // å¦‚æœæ²¡æœ‰ Firebase Authï¼Œç›´æ¥è·³è½¬
              console.log('â„¹ï¸ æœªæ£€æµ‹åˆ° Firebase Authï¼Œç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µ');
              window.location.href = 'login.html';
            }
          }, 1500);
        }
      }
    })();
  </script>
</head>
<body>

  <div id="pwaInstallToast" class="pwa-toast" role="status" aria-live="polite" aria-atomic="true" hidden>
    <div class="pwa-toast__icon" id="pwaInstallIcon" aria-hidden="true"></div>
    <div class="pwa-toast__content">
      <div class="pwa-toast__title" id="pwaInstallTitle">ç¦»çº¿èµ„æºåŒ…</div>
      <div class="pwa-toast__message" id="pwaInstallMessage">æ­£åœ¨å‡†å¤‡ç¦»çº¿èµ„æºâ€¦</div>
      <div class="pwa-toast__progress" id="pwaInstallProgress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div class="pwa-toast__progress-bar" id="pwaInstallProgressBar"></div>
      </div>
    </div>
    <button class="pwa-toast__close" id="pwaToastClose" type="button" aria-label="å…³é—­æç¤º">âœ•</button>
  </div>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <div class="main-container">
    <!-- ç§»åŠ¨ç«¯æŠ½å±‰ï¼šå°†å·¦ä¾§æ–‡ä»¶å¤¹ä¸æ–‡æ¡£åˆ—è¡¨ä¸Šä¸‹å †å å±•ç¤º -->
    <div class="sidebar-stack" id="sidebarStack">

      <!-- Notioné£æ ¼ä¾§è¾¹æ  -->
      <aside class="folder-management" id="sidebar-left" aria-label="å¯¼èˆªä¾§è¾¹æ ">
        <div class="sidebar-scroll" id="sidebarScroll">
          <!-- æ–‡ä»¶å¤¹åŒºåŸŸ -->
          <section class="sidebar-section folder-section" aria-labelledby="sidebarFolderTitle">
            <div class="folder-title-row">
              <div class="sidebar-title" id="sidebarFolderTitle">å†…å®¹ç®¡ç†</div>
              <div class="folder-title-actions">
                <button type="button" class="btn-sort theme-icon-btn desc" id="docSortToggle" aria-label="åˆ‡æ¢æ—¶é—´æ’åº" title="åˆ‡æ¢æ—¶é—´æ’åº">
                  <svg class="sort-icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                    <path class="arrow-up" d="M12 7l-4 4h8z"></path>
                    <path class="arrow-down" d="M12 17l4-4H8z"></path>
                  </svg>
                </button>
              </div>
            </div>
            <div class="folder-list" id="folderList">
              <!-- æœç´¢æŒ‰é’®å’Œæ–‡ä»¶å¤¹åˆ—è¡¨ç”± JS ç”Ÿæˆ -->
            </div>
          </section>

          <!-- æ–‡æ¡£åˆ—è¡¨ -->
          <section class="list-panel" id="listPanel" aria-label="æ–‡æ¡£åˆ—è¡¨">
            <div class="doc-list" id="documentList">
              <!-- æ–‡æ¡£åˆ—è¡¨ç”± JS ç”Ÿæˆ -->
            </div>
          </section>
        </div>
      </aside>
    </div>

   
    
    <!-- å³ä¾§åˆ— - å†…å®¹åŒºåŸŸ -->
    <main class="content-main">
      <div class="content-container">
         <!-- ç¼–è¾‘å·¥å…·æ ï¼šæ˜¾ç¤ºåˆ›å»ºæ—¥æœŸã€å­—æ•°ã€æ˜Ÿæ ‡ä¸é˜…è¯»æ¨¡å¼ -->
        <section class="main-header" id="editorToolbar" aria-label="æ–‡æ¡£å·¥å…·æ ">
          <div class="main-header-left">
            <!-- æŠ˜å æŒ‰é’® -->
            <button type="button" class="folder-collapse-btn theme-icon-btn" id="folderToolbarCollapseBtn" aria-label="æ”¶èµ·æ–‡ä»¶å¤¹å·¥å…·æ " title="æ”¶èµ·/å±•å¼€">
              <svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" fill="currentColor">
                <path d="M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"></path>
                <path d="m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"></path>
              </svg>
            </button>
            <!-- Logo -->
            <a href="#" class="logo">
              <img src="static/logo.png" alt="Fudoki" class="logo-icon">
              <span class="logo-text" id="logoText">Fudoki</span>
            </a>
              <div class="new-doc-group">
                <button type="button" class="btn-new theme-icon-btn editorNewBtn" id="newDocBtn" aria-label="æ–°å»ºæ–‡æ¡£" title="æ–°å»ºæ–‡æ¡£">
                  <svg aria-hidden="true" role="graphics-symbol" viewBox="0 0 20 20" class="compose">
                    <path d="m16.774 4.341-.59.589-1.109-1.11.596-.594a.784.784 0 0 1 1.103 0c.302.302.302.8 0 1.102zM8.65 12.462l6.816-6.813-1.11-1.11-6.822 6.808a1.1 1.1 0 0 0-.236.393l-.289.932c-.052.196.131.38.315.314l.932-.288a.9.9 0 0 0 .394-.236"></path>
                    <path d="M4.375 6.25c0-1.036.84-1.875 1.875-1.875H11a.625.625 0 1 0 0-1.25H6.25A3.125 3.125 0 0 0 3.125 6.25v7.5c0 1.726 1.4 3.125 3.125 3.125h7.5c1.726 0 3.125-1.4 3.125-3.125V9a.625.625 0 1 0-1.25 0v4.75c0 1.036-.84 1.875-1.875 1.875h-7.5a1.875 1.875 0 0 1-1.875-1.875z"></path>
                  </svg>
                </button>
                <button type="button" class="btn-new-dropdown theme-icon-btn" id="newDocDropdownBtn" aria-label="æ–°å»ºé€‰é¡¹" title="é€‰æ‹©æ–‡æ¡£ç±»å‹">
                  <svg aria-hidden="true" role="graphics-symbol" viewBox="0 0 20 20" class="arrowChevronSingleDown" style="width: 16px; height: 16px; display: block; fill: currentColor; flex-shrink: 0;">
                    <path d="M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 1 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 0 0-.884.884z"></path>
                  </svg>
                </button>
                <div class="new-doc-dropdown-menu" id="newDocDropdownMenu">
                  <a href="#" class="dropdown-item" data-doc-type="note">
                    <svg aria-hidden="true" role="graphics-symbol" viewBox="0 0 20 20" style="width: 18px; height: 18px; display: block; fill: currentColor; flex-shrink: 0; margin-right: 8px;">
                      <path d="M4.5 3h11a1.5 1.5 0 0 1 1.5 1.5v11a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 3 15.5v-11A1.5 1.5 0 0 1 4.5 3zm1 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V9a.5.5 0 0 0-.5-.5zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"></path>
                    </svg>
                    ä¾¿ç­¾
                  </a>
                  <a href="#" class="dropdown-item" data-doc-type="todo">
                    <svg aria-hidden="true" role="graphics-symbol" viewBox="0 0 20 20" style="width: 18px; height: 18px; display: block; fill: currentColor; flex-shrink: 0; margin-right: 8px;">
                      <path d="M5.5 3A2.5 2.5 0 0 0 3 5.5v9A2.5 2.5 0 0 0 5.5 17h9a2.5 2.5 0 0 0 2.5-2.5v-9A2.5 2.5 0 0 0 14.5 3h-9zm-.25 4.5a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75zM6 10a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H6zm-.75 3.75A.75.75 0 0 1 6 13h1.5a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75zM9.5 7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75zm.75 2.5a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3zm-.75 3.75a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75z"></path>
                    </svg>
                    ä»£åŠäº‹é¡¹
                  </a>
                </div>
              </div>
            <span class="editor-date" id="editorDocDate" title="åˆ›å»ºæ—¥æœŸ"></span>
            <span class="editor-count" id="editorCharCount" title="å­—æ•°">0 å­—</span>
            <button type="button" class="editor-star-toggle theme-icon-btn" id="editorStarToggle" aria-pressed="false" title="åŠ æ˜Ÿ">â˜†</button>
            
            <button class="theme-icon-btn" id="editorDeleteBtn" aria-label="åˆ é™¤æ–‡æ¡£" title="åˆ é™¤æ–‡æ¡£">
              <svg aria-hidden="true" role="graphics-symbol" viewBox="0 0 20 20" class="trash">
                <path d="M8.806 8.505a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0zm3.488 0a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0z"></path>
                <path d="M6.386 3.925v1.464H3.523a.625.625 0 1 0 0 1.25h.897l.393 8.646A2.425 2.425 0 0 0 7.236 17.6h5.528a2.425 2.425 0 0 0 2.422-2.315l.393-8.646h.898a.625.625 0 1 0 0-1.25h-2.863V3.925c0-.842-.683-1.525-1.525-1.525H7.91c-.842 0-1.524.683-1.524 1.525M7.91 3.65h4.18c.15 0 .274.123.274.275v1.464H7.636V3.925c0-.152.123-.275.274-.275m-.9 2.99h7.318l-.39 8.588a1.175 1.175 0 0 1-1.174 1.122H7.236a1.175 1.175 0 0 1-1.174-1.122l-.39-8.589z"></path>
              </svg>
            </button>
            
            <!-- å°†é˜…è¯»æ¨¡å¼æŒ‰é’®æ”¹ä¸º"å±•å¼€èœå•"æŒ‰é’®ï¼Œæ ·å¼ä¸åŠŸèƒ½ä¸€è‡´ -->
            <button class="theme-icon-btn" id="collapseMenuBtn" aria-label="å±•å¼€èœå•" title="å±•å¼€èœå•">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                <path d="M5 7h14" fill="none"></path>
                <path d="M5 12h14" fill="none"></path>
                <path d="M5 17h14" fill="none"></path>
              </svg>
            </button>
          </div>
          <div class="main-header-right">
            <button class="theme-icon-btn" id="syncBtn" aria-label="åŒæ­¥" title="åŒæ­¥">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-refresh" aria-hidden="true">
                <path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" />
                <path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" />
              </svg>
            </button>
            <!-- ç”¨æˆ·å¤´åƒå’Œä¸‹æ‹‰èœå• -->
              <div class="user-profile-container" id="userProfileContainer" style="display: none;">
                <button class="user-avatar-btn" id="userAvatarBtn" aria-label="ç”¨æˆ·èœå•" title="ç”¨æˆ·èœå•">
                  <img id="userAvatarImg" src="" alt="User Avatar" style="display: none;">
                  <svg viewBox="0 0 24 24" id="userAvatarPlaceholder">
                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                  </svg>
                </button>
                <div class="user-dropdown-menu" id="userDropdownMenu">
                  <div class="user-dropdown-header">
                    <div class="user-dropdown-name" id="userDisplayName">ç”¨æˆ·å</div>
                    <div class="user-dropdown-email" id="userEmail">user@example.com</div>
                  </div>
                    <button class="user-dropdown-item" id="syncDataBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
                      </svg>
                      <span data-i18n="userMenuSyncData">ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸ</span>
                    </button>
                    
                    <!-- ä¸»é¢˜é€‰æ‹© -->
                    <div class="user-dropdown-item submenu-parent" id="userThemeBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z"/>
                      </svg>
                      <span id="currentThemeName">Paper White</span>
                      <svg class="submenu-arrow" viewBox="0 0 24 24" width="16" height="16">
                        <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                      </svg>
                      <div class="user-submenu" id="themeSubmenu">
                        <button class="submenu-item active" data-theme="paper">Paper White</button>
                        <button class="submenu-item" data-theme="sakura">Sakura</button>
                        <button class="submenu-item" data-theme="sticky">Sticky Note</button>
                        <button class="submenu-item" data-theme="green">Green</button>
                        <button class="submenu-item" data-theme="blue">Blue</button>
                        <button class="submenu-item" data-theme="dark">Dark</button>
                      </div>
                    </div>
                    
                    <!-- è¯­è¨€é€‰æ‹© -->
                    <div class="user-dropdown-item submenu-parent" id="userLangBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M12.87,15.07L10.33,12.56L10.36,12.53C12.1,10.59 13.34,8.36 14.07,6H17V4H10V2H8V4H1V6H12.17C11.5,7.92 10.44,9.75 9,11.35C8.07,10.32 7.3,9.19 6.69,8H4.69C5.42,9.63 6.42,11.17 7.67,12.56L2.58,17.58L4,19L9,14L12.11,17.11L12.87,15.07M18.5,10H16.5L12,22H14L15.12,19H19.87L21,22H23L18.5,10M15.88,17L17.5,12.67L19.12,17H15.88Z"/>
                      </svg>
                      <span id="currentLangName">æ—¥æœ¬èª</span>
                      <svg class="submenu-arrow" viewBox="0 0 24 24" width="16" height="16">
                        <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                      </svg>
                      <div class="user-submenu" id="langSubmenu">
                        <button class="submenu-item" data-lang="en">English</button>
                        <button class="submenu-item active" data-lang="ja">æ—¥æœ¬èª</button>
                        <button class="submenu-item" data-lang="zh">ä¸­æ–‡</button>
                      </div>
                    </div>
                    <button class="user-dropdown-item" id="userSettingsBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.13,5.91,7.63,6.29L5.23,5.33c-0.22-0.09-0.47,0-0.59,0.22L2.72,8.87c-0.11,0.2-0.06,0.46,0.12,0.61l2.03,1.58c-0.05,0.3-0.07,0.62-0.07,0.94c0,0.33,0.02,0.64,0.06,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54c0.04,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.43-0.17,0.48-0.41l0.36-2.54c0.59-0.24,1.12-0.56,1.62-0.94l2.39,0.96c0.22,0.09,0.47,0,0.59-0.22l1.92-3.32c0.11-0.2,0.06-0.46-0.12-0.61L19.14,12.94z M12,15.5c-1.93,0-3.5-1.57-3.5-3.5S10.07,8.5,12,8.5s3.5,1.57,3.5,3.5S13.93,15.5,12,15.5z"/>
                      </svg>
                      <span data-i18n="userMenuSettings">è¨­å®š</span>
                    </button>
                    <!-- æ•°æ®ç®¡ç† -->
                    <div class="user-dropdown-item submenu-parent" id="userDataManagementBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L19.17,18.08L16.68,11.77L12.09,13.27Z"/>
                      </svg>
                      <span data-i18n="userMenuDataManagement">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</span>
                      <svg class="submenu-arrow" viewBox="0 0 24 24" width="16" height="16">
                        <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                      </svg>
                      <div class="user-submenu" id="dataManagementSubmenu">
                        <button class="submenu-item" id="userExportBtn">
                          <svg viewBox="0 0 24 24" width="16" height="16" style="margin-right: 8px;">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M12,19L8,15H10.5V12H13.5V15H16L12,19Z"/>
                          </svg>
                          <span data-i18n="userMenuExport">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span>
                        </button>
                        <button class="submenu-item" id="userImportBtn">
                          <svg viewBox="0 0 24 24" width="16" height="16" style="margin-right: 8px;">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M12,12L16,16H13.5V19H10.5V16H8L12,12Z"/>
                          </svg>
                          <span data-i18n="userMenuImport">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span>
                        </button>

                      </div>
                    </div>
                    <input type="file" id="userImportFile" accept="application/json" style="display:none">

                    <button class="user-dropdown-item" id="userDownloadBtn">
                      <svg viewBox="0 0 24 24" width="16" height="16" >
                        <path d="M5 20h14v-2H5v2z"/>
                        <path d="M12 4v8l-4-4-1.4 1.4L12 15.8l5.4-5.4L16 8l-4 4V4z"/>
                      </svg>
                      <span data-i18n="userMenuDownload">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</span>
                    </button>
                    <button class="user-dropdown-item" id="switchAccountBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M16 17v2H2v-2s0-4 7-4 7 4 7 4m-3.5-9.5A3.5 3.5 0 1 0 9 11a3.5 3.5 0 0 0 3.5-3.5m3.44 5.5A5.32 5.32 0 0 1 18 17v2h4v-2s0-3.63-6.06-4M15 4a3.4 3.4 0 0 0-1.93.59a5 5 0 0 1 0 5.82A3.4 3.4 0 0 0 15 11a3.5 3.5 0 0 0 0-7z"/>
                      </svg>
                      <span data-i18n="userMenuSwitchAccount">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆ</span>
                    </button>
                  <button class="user-dropdown-item logout" id="logoutBtn">
                    <svg viewBox="0 0 24 24">
                      <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                    <span data-i18n="userMenuLogout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</span>
                  </button>
                </div>
              </div>
              
              <!-- ç”¨æˆ·å¤´åƒå’Œä¸‹æ‹‰èœå• -->
              <div class="user-profile-container" id="userProfileContainer" style="display: none;">
                <button class="user-avatar-btn" id="userAvatarBtn" aria-label="ç”¨æˆ·èœå•" title="ç”¨æˆ·èœå•">
                  <img id="userAvatarImg" src="" alt="User Avatar" style="display: none;">
                  <svg viewBox="0 0 24 24" id="userAvatarPlaceholder">
                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                  </svg>
                </button>
                <div class="user-dropdown-menu" id="userDropdownMenu">
                  <div class="user-dropdown-header">
                    <div class="user-dropdown-name" id="userDisplayName">ç”¨æˆ·å</div>
                    <div class="user-dropdown-email" id="userEmail">user@example.com</div>
                  </div>
                    <button class="user-dropdown-item" id="syncDataBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
                      </svg>
                      <span data-i18n="userMenuSyncData">ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸ</span>
                    </button>
                    
                    <!-- ä¸»é¢˜é€‰æ‹© -->
                    <div class="user-dropdown-item submenu-parent" id="userThemeBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z"/>
                      </svg>
                      <span id="currentThemeName">Paper White</span>
                      <svg class="submenu-arrow" viewBox="0 0 24 24" width="16" height="16">
                        <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                      </svg>
                      <div class="user-submenu" id="themeSubmenu">
                        <button class="submenu-item active" data-theme="paper">Paper White</button>
                        <button class="submenu-item" data-theme="sakura">Sakura</button>
                        <button class="submenu-item" data-theme="sticky">Sticky Note</button>
                        <button class="submenu-item" data-theme="green">Green</button>
                        <button class="submenu-item" data-theme="blue">Blue</button>
                        <button class="submenu-item" data-theme="dark">Dark</button>
                      </div>
                    </div>
                    
                    <!-- è¯­è¨€é€‰æ‹© -->
                    <div class="user-dropdown-item submenu-parent" id="userLangBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M12.87,15.07L10.33,12.56L10.36,12.53C12.1,10.59 13.34,8.36 14.07,6H17V4H10V2H8V4H1V6H12.17C11.5,7.92 10.44,9.75 9,11.35C8.07,10.32 7.3,9.19 6.69,8H4.69C5.42,9.63 6.42,11.17 7.67,12.56L2.58,17.58L4,19L9,14L12.11,17.11L12.87,15.07M18.5,10H16.5L12,22H14L15.12,19H19.87L21,22H23L18.5,10M15.88,17L17.5,12.67L19.12,17H15.88Z"/>
                      </svg>
                      <span id="currentLangName">æ—¥æœ¬èª</span>
                      <svg class="submenu-arrow" viewBox="0 0 24 24" width="16" height="16">
                        <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                      </svg>
                      <div class="user-submenu" id="langSubmenu">
                        <button class="submenu-item" data-lang="en">English</button>
                        <button class="submenu-item active" data-lang="ja">æ—¥æœ¬èª</button>
                        <button class="submenu-item" data-lang="zh">ä¸­æ–‡</button>
                      </div>
                    </div>
                    <button class="user-dropdown-item" id="userSettingsBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.13,5.91,7.63,6.29L5.23,5.33c-0.22-0.09-0.47,0-0.59,0.22L2.72,8.87c-0.11,0.2-0.06,0.46,0.12,0.61l2.03,1.58c-0.05,0.3-0.07,0.62-0.07,0.94c0,0.33,0.02,0.64,0.06,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54c0.04,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.43-0.17,0.48-0.41l0.36-2.54c0.59-0.24,1.12-0.56,1.62-0.94l2.39,0.96c0.22,0.09,0.47,0,0.59-0.22l1.92-3.32c0.11-0.2,0.06-0.46-0.12-0.61L19.14,12.94z M12,15.5c-1.93,0-3.5-1.57-3.5-3.5S10.07,8.5,12,8.5s3.5,1.57,3.5,3.5S13.93,15.5,12,15.5z"/>
                      </svg>
                      <span data-i18n="userMenuSettings">è¨­å®š</span>
                    </button>
                    <!-- æ•°æ®ç®¡ç† -->
                    <div class="user-dropdown-item submenu-parent" id="userDataManagementBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L19.17,18.08L16.68,11.77L12.09,13.27Z"/>
                      </svg>
                      <span data-i18n="userMenuDataManagement">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</span>
                      <svg class="submenu-arrow" viewBox="0 0 24 24" width="16" height="16">
                        <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                      </svg>
                      <div class="user-submenu" id="dataManagementSubmenu">
                        <button class="submenu-item" id="userExportBtn">
                          <svg viewBox="0 0 24 24" width="16" height="16" style="margin-right: 8px;">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M12,19L8,15H10.5V12H13.5V15H16L12,19Z"/>
                          </svg>
                          <span data-i18n="userMenuExport">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span>
                        </button>
                        <button class="submenu-item" id="userImportBtn">
                          <svg viewBox="0 0 24 24" width="16" height="16" style="margin-right: 8px;">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M12,12L16,16H13.5V19H10.5V16H8L12,12Z"/>
                          </svg>
                          <span data-i18n="userMenuImport">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span>
                        </button>

                      </div>
                    </div>
                    <input type="file" id="userImportFile" accept="application/json" style="display:none">

                    <button class="user-dropdown-item" id="userDownloadBtn">
                      <svg viewBox="0 0 24 24" width="16" height="16" >
                        <path d="M5 20h14v-2H5v2z"/>
                        <path d="M12 4v8l-4-4-1.4 1.4L12 15.8l5.4-5.4L16 8l-4 4V4z"/>
                      </svg>
                      <span data-i18n="userMenuDownload">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</span>
                    </button>
                    <button class="user-dropdown-item" id="switchAccountBtn">
                      <svg viewBox="0 0 24 24">
                        <path d="M16 17v2H2v-2s0-4 7-4 7 4 7 4m-3.5-9.5A3.5 3.5 0 1 0 9 11a3.5 3.5 0 0 0 3.5-3.5m3.44 5.5A5.32 5.32 0 0 1 18 17v2h4v-2s0-3.63-6.06-4M15 4a3.4 3.4 0 0 0-1.93.59a5 5 0 0 1 0 5.82A3.4 3.4 0 0 0 15 11a3.5 3.5 0 0 0 0-7z"/>
                      </svg>
                      <span data-i18n="userMenuSwitchAccount">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆ</span>
                    </button>
                  <button class="user-dropdown-item logout" id="logoutBtn">
                    <svg viewBox="0 0 24 24">
                      <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                    <span data-i18n="userMenuLogout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</span>
                  </button>
                </div>
              </div>
          </div>
        </section>

        <div class="editor-panels" id="editorPanels">
        <!-- è¾“å…¥åŒºåŸŸ -->
        <section class="input-section">
          <div class="input-group">
            <textarea id="textInput" placeholder="åœ¨æ­¤è¾“å…¥æ—¥è¯­æ–‡æœ¬è¿›è¡Œåˆ†æ..."></textarea>
            <!-- ç§»é™¤åˆ†ææŒ‰é’®ï¼šæ”¹ä¸ºåœ¨æ–‡æœ¬åŸŸå¤±å»ç„¦ç‚¹ä¸”ç»“æ„å˜åŒ–æ—¶è‡ªåŠ¨è§£æ -->
          </div>
          <div class="input-font-controls">
            <div class="editor-fontsize-control" id="editorFontSizeControl">
              <input type="range" id="editorFontSizeRange" min="0.8" max="1.5" step="0.05" value="1" aria-label="å­—å·">
              <div class="font-size-display" id="editorFontSizeValue">100%</div>
            </div>

            <!-- å­—ä½“é€‰æ‹©ï¼ˆåˆ†åˆ«æ§åˆ¶ç¼–è¾‘åŒºä¸æ˜¾ç¤ºåŒºï¼‰ -->
            <div class="editor-fontfamily-controls" id="editorFontFamilyControls">
              <label class="sr-only" for="editorInputFontSelect">ç¼–è¾‘åŒºå­—ä½“</label>
              <select id="editorInputFontSelect" title="ç¼–è¾‘åŒºå­—ä½“" aria-label="ç¼–è¾‘åŒºå­—ä½“">
                <option value="system-ui,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial,\"Noto Sans\",\"Apple Color Emoji\",\"Segoe UI Emoji\"">ç³»ç»Ÿé»˜è®¤</option>
                <option value="-apple-system,\"SF Pro Text\",system-ui,BlinkMacSystemFont">SF Pro</option>
                <option value="PingFang SC,\"Microsoft YaHei\",system-ui,Arial,Helvetica">ä¸­æ–‡é»‘ä½“</option>
                <option value="Hiragino Sans,Meiryo,\"Yu Gothic\",system-ui">æ—¥æ–‡å­—ä½“(æ— è¡¬çº¿)</option>
                <option value="Hiragino Mincho Pro,Noto Serif JP,\"Times New Roman\",Georgia,serif">æ—¥æ–‡å­—ä½“(è¡¬çº¿)</option>
                <option value="Menlo,Monaco,Consolas,\"Courier New\",monospace">ç­‰å®½å­—ä½“</option>
              </select>
              <label class="sr-only" for="editorContentFontSelect">æ˜¾ç¤ºåŒºå­—ä½“</label>
              <select id="editorContentFontSelect" title="æ˜¾ç¤ºåŒºå­—ä½“" aria-label="æ˜¾ç¤ºåŒºå­—ä½“">
                <option value="system-ui,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial,\"Noto Sans\",\"Apple Color Emoji\",\"Segoe UI Emoji\"">ç³»ç»Ÿé»˜è®¤</option>
                <option value="-apple-system,\"SF Pro Text\",system-ui,BlinkMacSystemFont">SF Pro</option>
                <option value="PingFang SC,\"Microsoft YaHei\",system-ui,Arial,Helvetica">ä¸­æ–‡é»‘ä½“</option>
                <option value="Hiragino Sans,Meiryo,\"Yu Gothic\",system-ui">æ—¥æ–‡å­—ä½“(æ— è¡¬çº¿)</option>
                <option value="Hiragino Mincho Pro,Noto Serif JP,\"Times New Roman\",Georgia,serif">æ—¥æ–‡å­—ä½“(è¡¬çº¿)</option>
                <option value="Menlo,Monaco,Consolas,\"Courier New\",monospace">ç­‰å®½å­—ä½“</option>
              </select>
            </div>
          </div>
        </section>

        <!-- å¯æ‹–æ‹½çš„åˆ†éš”æ¡ -->
        <div class="resizer" id="panelResizer" title="æ‹–æ‹½è°ƒæ•´é«˜åº¦"></div>
        
        <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
        <section class="content-area">
          <!-- é¡¶éƒ¨æ’­æ”¾æ§åˆ¶æ ï¼šå·¦æ’­æ”¾æŒ‰é’® + ä¸­è¿›åº¦æ¡ + å³éŸ³é‡ -->
        <div class="play-control-bar" id="headerPlayControl" aria-label="æ’­æ”¾æ§åˆ¶æ ">
          <div class="play-control-bar-buttons">
            <button class="theme-icon-btn play-toggle" id="headerPlayToggle" aria-label="æ’­æ”¾å…¨æ–‡" title="æ’­æ”¾å…¨æ–‡">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="currentColor">
                <path d="M8 5v14l11-7z" fill="currentColor"></path>
              </svg>
            </button>
            <!-- æš‚åœ/æ¢å¤æŒ‰é’® -->
            <button class="theme-icon-btn pause-toggle" id="headerPauseToggle" aria-label="æš‚åœ" title="æš‚åœ">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="currentColor">
                <path d="M6 5h4v14H6z" fill="currentColor"></path>
                <path d="M14 5h4v14h-4z" fill="currentColor"></path>
              </svg>
            </button>
          </div>
          
          <div class="play-progress" id="headerPlayProgress" aria-label="æ’­æ”¾è¿›åº¦" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div class="play-progress-fill" id="headerPlayProgressFill"></div>
          </div>
          
          <!-- å¤´éƒ¨è¯­éŸ³ä¸é€Ÿåº¦æ§ä»¶ -->
          <div class="header-voice-controls" id="headerVoiceControls" aria-label="è¯­éŸ³ä¸é€Ÿåº¦è®¾ç½®">

            <input type="range" id="headerSpeedRange" min="0.5" max="2" step="0.1" value="1" aria-label="è©±é€Ÿ">
            <div class="speed-display" id="headerSpeedValue">1.0x</div>
            <select id="headerVoiceSelect">
              <option value="">éŸ³å£°ã‚’é¸æŠ...</option>
            </select>
          </div>
          <input type="range" id="headerVolume" class="play-volume" min="0" max="1" step="0.05" value="1" aria-label="éŸ³é‡" title="éŸ³é‡">
        </div>

          <div class="content-scroll-area" id="content">
          <div class="empty-state">
            <p id="emptyText">è¯·åœ¨ä¸Šæ–¹è¾“å…¥æ—¥è¯­æ–‡æœ¬ï¼Œç‚¹å‡»"åˆ†ææ–‡æœ¬"å¼€å§‹å¤„ç†</p>
            </div>
          </div>
        </section>
        </div>
      </div>
    </main>
     <!-- ç§»åŠ¨ç«¯ä¾§è¾¹æ é®ç½©å±‚ -->
     <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <!-- è®¾ç½®å¼¹çª— -->
    <div class="settings-modal" id="settingsModal">
      <div class="settings-modal-content">
        <!-- å¼¹çª—æ ‡é¢˜æ  -->
        <div class="settings-modal-header">
          <div class="settings-modal-title">
            <svg class="settings-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
            </svg>
            <span id="voiceTitle">ç³»ç»Ÿè®¾ç½®</span>
          </div>
          <button class="settings-modal-close" id="settingsModalClose" title="å…³é—­">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </div>
      
      <!-- å·¥å…·æ å†…å®¹ï¼ˆå¼¹çª—å†…ä¿ç•™ç©ºå®¹å™¨ï¼Œé¿å…ä¸å†…åµŒè®¾ç½®é‡å¤IDï¼‰ -->
       <div class="toolbar-content" id="settingsModalBody"></div>
     </div>
   </div>

   <!-- å³ä¾§è¾¹æ å·²ç§»é™¤ï¼Œç»Ÿä¸€ä½¿ç”¨é¡¶éƒ¨é½¿è½®æ‰“å¼€çš„è®¾ç½®å¼¹çª— -->

  <!-- æ–‡æ¡£æœç´¢æ¨¡æ€æ¡† -->
  <div class="search-modal" id="searchModal">
    <div class="search-modal-content">
      <!-- æœç´¢æ ‡é¢˜æ  -->
      <div class="search-modal-header">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input type="text" class="search-modal-input" id="searchModalInput" placeholder="æœç´¢æ–‡æ¡£æ ‡é¢˜æˆ–å†…å®¹..." autocomplete="off">
        <button class="search-modal-close" id="searchModalClose" title="å…³é—­">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      
      <!-- æœç´¢ç»“æœ -->
      <div class="search-modal-results" id="searchModalResults">
        <div class="search-empty-state">
          <svg viewBox="0 0 24 24" width="48" height="48" fill="currentColor" opacity="0.3">
            <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
          <p>è¾“å…¥å…³é”®è¯å¼€å§‹æœç´¢</p>
        </div>
      </div>
      
      <!-- åº•éƒ¨æç¤º -->
      <div class="search-modal-footer">
        <span class="search-tip">
          <kbd>â†µ</kbd> æ‰“å¼€ 
          <kbd>Esc</kbd> å…³é—­
        </span>
      </div>
    </div>
  </div>

  <!-- åº”ç”¨ç¨‹åºåˆ—è¡¨ä¾§è¾¹æ  -->
  <div class="app-drawer" id="appDrawer" aria-hidden="true">
    <div class="app-drawer-content">
      <div class="app-drawer-header">
        <h3 class="app-drawer-title" id="appDrawerTitle">åº”ç”¨ç¨‹åº</h3>
        <button class="app-drawer-close" id="appDrawerClose" aria-label="å…³é—­åº”ç”¨ç¨‹åºåˆ—è¡¨">âœ•</button>
      </div>
      <div class="app-drawer-body">
        <div class="app-list">
          <div class="app-item" data-app="fudoki">
            <div class="app-icon-large">
              <img src="https://fudoki.iamcheyan.com/static/logo.png" alt="Fudoki" width="32" height="32" />
            </div>
            <div class="app-info">
              <div class="app-name">Fudoki</div>
              <div class="app-desc">æ—¥æœ¬èªå­¦ç¿’è€…ã‚„è‡ªç„¶è¨€èªå‡¦ç†ç ”ç©¶è€…å‘ã‘ã®æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆåˆ†æãƒ„ãƒ¼ãƒ«ã€‚</div>
            </div>
          </div>

          <div class="app-item" data-app="terebi">
            <div class="app-icon-large">
              <img src="https://terebi.iamcheyan.com/static/logo.png" alt="Terebi" width="32" height="32" />
            </div>
            <div class="app-info">
              <div class="app-name">Terebi</div>
              <div class="app-desc">æ—¥æœ¬å…¨å›½100ä»¥ä¸Šã®ãƒ†ãƒ¬ãƒ“å±€ã®å…¬é–‹ç•ªçµ„ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§è¦–è´å¯èƒ½ã€‚</div>
            </div>
          </div>

          <div class="app-item" data-app="kotoba">
            <div class="app-icon-large">
              <img src="https://kotoba.iamcheyan.com/static/favicon.svg" alt="Kotoba" width="32" height="32" />
            </div>
            <div class="app-info">
              <div class="app-name">Kotoba</div>
              <div class="app-desc">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ—¥æœ¬èªå˜èªæš—è¨˜ãƒ„ãƒ¼ãƒ«ã€‚è¾æ›¸åˆ‡æ›¿ã‚„å„ç¨®è£œåŠ©è¡¨ç¤ºè¨­å®šã«å¯¾å¿œã€‚</div>
            </div>
          </div>
        </div>
      </div>
      <div class="app-drawer-footer">
        <div class="user-profile">
          <!-- <div class="user-avatar">
            <svg viewBox="0 0 24 24" width="40" height="40" fill="currentColor">
              <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
            </svg>
          </div> -->
          <!-- <div class="user-info">
            <div class="user-email">iamcheyan.com</div>
          </div> -->
        </div>
        <footer class="footer" role="contentinfo">
            <div class="footer-inner">
              <span class="footer-copy">Â©</span>
              <a href="https://iamcheyan.com/" target="_blank" rel="noreferrer noopener" class="footer-brand" title="iamcheyan.com">Cheyan</a>
              <span class="footer-copy">All Rights Reserved</span>
              <span class="footer-sep">â€¢</span>
              <a href="https://github.com/iamcheyan/fudoki" target="_blank" rel="noreferrer noopener" class="footer-link" aria-label="GitHub" title="GitHub">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="currentColor"><path d="M12 .5a11.5 11.5 0 0 0-3.64 22.42c.58.11.8-.25.8-.56v-2.02c-3.26.71-3.95-1.4-3.95-1.4-.53-1.36-1.3-1.72-1.3-1.72-1.06-.72.08-.71.08-.71 1.18.08 1.8 1.21 1.8 1.21 1.04 1.79 2.73 1.27 3.4.97.11-.76.41-1.27.75-1.56-2.6-.3-5.33-1.3-5.33-5.8 0-1.28.46-2.32 1.21-3.14-.12-.3-.52-1.52.11-3.17 0 0 .98-.31 3.2 1.2.94-.26 1.95-.39 2.95-.39s2.01.13 2.95.39c2.22-1.51 3.19-1.2 3.19-1.2.64 1.65.24 2.87.12 3.17.76.82 1.21 1.86 1.21 3.14 0 4.51-2.73 5.5-5.34 5.79.42.36.8 1.08.8 2.18v3.23c0 .31.21.68.81.56A11.5 11.5 0 0 0 12 .5Z"></path></svg>
                <span class="footer-link-label">GitHub</span>
              </a>
            </div>
          </footer>
        <!-- <button class="logout-btn" id="logoutBtn">é€€å‡º</button> -->
      </div>
    </div>
  </div>
  <div class="app-drawer-backdrop" id="appDrawerBackdrop" aria-hidden="true"></div>
    
  </div>

  <button type="button" class="reading-mode-toggle" id="readingModeToggle" aria-pressed="false" title="é˜…è¯»æ¨¡å¼">
    <span class="reading-toggle-icon" aria-hidden="true">
      <span class="reading-icon-lines"></span>
    </span>
  </button>

  <!-- åŒæ­¥è¿›åº¦æç¤º -->
  <div class="sync-progress-toast" id="syncProgressToast">
    <div class="sync-progress-content">
      <div class="sync-spinner"></div>
      <div class="sync-progress-text" id="syncProgressText">ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸä¸­...</div>
    </div>
  </div>

  <!-- é”™è¯¯æç¤º -->
  <div class="error-toast" id="errorToast">
    <div class="error-toast-content">
      <svg class="error-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
      </svg>
      <div class="error-text" id="errorText">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</div>
    </div>
  </div>

  
  <!-- JavaScriptæ–‡ä»¶ -->
  <!-- Firebase SDK removed for Chrome Extension compatibility -->
  <!-- 
  <script type="module">
    // Firebase logic removed
  </script>
  -->
  
  <!-- EasyMDE Markdown ç¼–è¾‘å™¨ removed -->
  <script src="static/libs/kuromoji.js"></script>
  <script src="static/libs/kuroshiro.min.js"></script>
  <script src="static/libs/kuroshiro-analyzer-kuromoji.min.js"></script>
  <script src="static/libs/dict/dictionary-service.js"></script>
  <script src="static/segmenter.js"></script>
  <script src="static/js/dictionary.js"></script>
  <script src="static/js/ui-utils.js"></script>
  <script src="static/js/tts.js"></script>
  <script src="static/js/i18n.js"></script>
  <script src="static/js/extension-bridge.js"></script>
  <script src="static/main-js.js"></script>
</body>
</html>
